# ì˜µí‹°ë§ˆì´ì €ëž€?

íƒœê·¸: ë°ì´í„°ë² ì´ìŠ¤

**ðŸ“Œâœ”**

## **ì˜µí‹°ë§ˆì´ì €ëž€?**

ê°œë°œìžê°€ ìž‘ì„±í•œ SQLì„ ì–´ë–»ê²Œ ì‹¤í–‰í•  ê²ƒì¸ì§€ ì‹¤í–‰ê³„íšì„ ìˆ˜ë¦½í•˜ê³  SQLì„ ì‹¤í–‰í•˜ê²Œ ë˜ëŠ”ë°, ì‹¤í–‰ê³„íšì˜ ìˆ˜ë¦½ì„ ë§¡ì•„ì„œ ìˆ˜í–‰

> **ðŸ“Œ** SQLì„ ê°€ìž¥ ë¹ ë¥´ê³  íš¨ìœ¨ì ìœ¼ë¡œ ìˆ˜í–‰í•  ìµœì ì˜ ì¿¼ë¦¬ ê²½ë¡œë¥¼ ìƒì„±í•´ì£¼ëŠ” DBMS ë‚´ë¶€ ì—”ì§„
> 

## **ðŸ“ŒÂ ì‹¤í–‰ ê³„íš (Execution Plan)**

ë°ì´í„° ë”•ì…”ë„ˆë¦¬ì— ìžˆëŠ” ì˜¤ë¸Œì íŠ¸ í†µê³„, ì‹œìŠ¤í…œ í†µê³„ ë“±ì˜ ì •ë³´ë¥¼ ì‚¬ìš©í•´ì„œ ì˜ˆìƒë˜ëŠ” ë¹„ìš©ì„ í‰ê°€í•˜ì—¬ ì—¬ëŸ¬ ì‹¤í–‰ê³„íšì„ ì„¸ìš°ê³  **í•´ë‹¹ ë¹„ìš©ì„ ì—°ì‚°í•˜ê³  ê°€ìž¥ ë‚®ì€ ë¹„ìš©ì„ ê°€ì§„ ì‹¤í–‰ê³„íšì„ ì„ íƒ**

### **âœ”Â ì¿¼ë¦¬ ì²˜ë¦¬ íë¦„ - ê°œë°œìžê°€ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ë©´ ì˜µí‹°ë§ˆì´ì €ëŠ” ì–¸ì œ ì‹¤í–‰ ê³„íšì„ ìž‘ì„±í• ê¹Œ?!**

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-07-14 á„‹á…©á„’á…® 11.21.28.png](%E1%84%8B%E1%85%A9%E1%86%B8%E1%84%90%E1%85%B5%E1%84%86%E1%85%A1%E1%84%8B%E1%85%B5%E1%84%8C%E1%85%A5%E1%84%85%E1%85%A1%E1%86%AB%20dc92b4624af7486ea003b3f2d1c4ec31/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-07-14_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_11.21.28.png)

1. ê°œë°œìžê°€ SQLë¬¸ì„ ìž‘ì„±
2. íŒŒì„œ(Parser)ëŠ” ê°œë°œìžê°€ ìž‘ì„±í•œ SQLë¬¸ì„ ë¬¸ë²• ê²€ì‚¬ì™€ êµ¬ë¬¸ ë¶„ì„ì„ ì§„í–‰
3. ì˜µí‹°ë§ˆì´ì €ëŠ” ì—¬ëŸ¬ í”Œëžœì„ ìƒì„±, ì¹´íƒˆë¡œê·¸ ë§¤ë‹ˆì €ì— ìžˆëŠ” ê°ì¢… í†µê³„ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¹„ìš©ì„ í‰ê°€í•˜ì—¬ ìµœì†Œ ë¹„ìš©ì˜ ì‹¤í–‰ê³„íšì„ ê²°ì •í•¨
4. SQL ì‹¤í–‰ ì—”ì§„ì´ ì˜µí‹°ë§ˆì´ì €ê°€ ê²°ì •í•œ ì‹¤í–‰ê³„íšëŒ€ë¡œ ë°ì´í„°ì²˜ë¦¬í•˜ì—¬ ì‚¬ìš©ìžì—ê²Œ ì „ë‹¬

> ì˜µí‹°ë§ˆì´ì € ì‹¤í–‰ ë°©ë²•ì—” **ê·œì¹™ê¸°ë°˜ ì˜µí‹°ë§ˆì´ì € / ë¹„ìš©ê¸°ë°˜ ì˜µí‹°ë§ˆì´ì €**ê°€ ìžˆìŒ
> 
> 
> ëŒ€ë¶€ë¶„ì˜ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ëŠ” ë³´í†µ **ë¹„ìš©ê¸°ë°˜ ì˜µí‹°ë§ˆì´ì €**ë§Œì„ ì œê³µí•¨.
> 

## **ê·œì¹™ê¸°ë°˜(RBO) / ë¹„ìš©ê¸°ë°˜ (CBO) ì˜µí‹°ë§ˆì´ì €**

1. **ê·œì¹™ê¸°ë°˜ Rule based obtimizer**
    - ì‹¤í–‰ ì†ë„ê°€ ë¹ ë¥¸ ìˆœìœ¼ë¡œ ê·œì¹™ì„ ì„¸ì›Œë‘ê³  ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ ë°©ë²•ì„ ì±„íƒí•˜ëŠ” ì˜µí‹°ë§ˆì´ì €
    - ê·œì¹™ = ì•¡ì„¸ìŠ¤ ê²½ë¡œë³„ ìš°ì„ ìˆœìœ„ë¡œì„œ, ì¸ë±ìŠ¤ êµ¬ì¡°, ì—°ì‚°, ì¡°ê±´ì ˆ í˜•íƒœê°€ ìˆœìœ„ë¥¼ ê²°ì • ì§€ìŒ
    - ðŸ”‘Â `ê·œì¹™ ìš°ì„ ìˆœìœ„`
        1. ROWIDë¥¼ ì‚¬ìš©í•œ ë‹¨ì¼ í–‰ì¸ê²½ìš°
        2. í´ëŸ¬ìŠ¤í„° ì¡°ì¸ì— ì˜í•œ ë‹¨ì¼í–‰
        3. ìœ ì¼í•˜ê±°ë‚˜ ê¸°ë³¸í‚¤ë¥¼ ê°€ì§„ í•´ì‹œ í´ëŸ¬ìŠ¤í„° í‚¤ì— ì˜í•œ ë‹¨ì¼í–‰ì¸ ê²½ìš°
        4. ìœ ì¼í•˜ê±°ë‚˜ ê¸°ë³¸í‚¤ì— ì˜í•œ ë‹¨ì¼í–‰ì¸ê²½ìš°
        5. í´ëŸ¬ìŠ¤í„° ì¡°ì¸ì¸ê²½ìš°
        6. í•´ì‹œ í´ëŸ¬ìŠ¤í„° ì¡°ì¸ì¸ê²½ìš°
        7. ì¸ë±ìŠ¤ í´ëŸ¬ìŠ¤í„° í‚¤ì¸ ê²½ìš°
        8. ë³µí•© ì»¬ëŸ¼ ì¸ë±ìŠ¤ì¸ê²½ìš°
        9. ë‹¨ì¼ ì»¬ëŸ¼ ì¸ë±ìŠ¤ ì¸ê²½ìš°
        10. ì¸ë±ìŠ¤ê°€ êµ¬ì„±ëœ ì¹¼ëŸ¼ì—ì„œ ì œí•œëœ ë²”ìœ„ë¥¼ ê²€ìƒ‰í•˜ëŠ” ê²½ìš°
    
2. **ë¹„ìš© ê¸°ë°˜ Cost based obtimizer**
    - ê·œì¹™ê¸°ë°˜ ì˜µí‹°ë§ˆì´ì €ì˜ ë‹¨ì ì„ ê·¹ë³µí•˜ê¸° ìœ„í•´ ì¶œí˜„
    - SQLë¬¸ì„ ì²˜ë¦¬í•˜ëŠ”ë° í•„ìš”í•œ ë¹„ìš©ì´ ê°€ìž¥ ì ì€ ì‹¤í–‰ê³„íšì„ ì„ íƒí•¨
    - ê³„ì‚°í•˜ëŠ” `ë¹„ìš©`, SQLë¬¸ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ `ì˜ˆìƒë˜ëŠ” ì†Œìš”ì‹œê°„ / ìžì› ì‚¬ìš©ëŸ‰`
        - ë¹„ìš© = ì˜ˆìƒì¹˜ : í…Œì´ë¸”, ì¸ë±ìŠ¤,ì¹¼ëŸ¼ ë“± ë‹¤ì–‘í•œ ê°ì²´ í†µê³„ì •ë³´ ë° ì‹œìŠ¤í…œ í†µê³„ì •ë³´ ( CPU ì†ë„, ë””ìŠ¤í¬ I/O ì†ë„ ë“±)ì„ ì´ìš©í•¨

## **ðŸ“ŒÂ ì˜µí‹°ë§ˆì´ì €ì˜ ìµœì í™” ëª©í‘œ**

### (1) ì „ì²´ ì²˜ë¦¬ ì†ë„ ìµœì í™”

- ì¿¼ë¦¬ ìµœì¢… ê²°ê³¼ì§‘í•©ì„ ëê¹Œì§€ ì½ëŠ” ê²ƒì„ ì „ì œ, ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ë¥¼ ê°€ìž¥ ì ê²Œ ì‚¬ìš©í•˜ëŠ” ì‹¤í–‰ê³„íšì„ ì„¸ì›€
- ëŒ€ë¶€ë¶„ì˜ DBMSì˜ ê¸°ë³¸ ì˜µí‹°ë§ˆì´ì € ëª¨ë“œëŠ” ì „ì²´ ì²˜ë¦¬ì†ë„ ìµœì í™”ì— ë§žì¶°ì ¸ìžˆìŒ

### (2) ìµœì´ˆ ì‘ë‹µì†ë„ ìµœì í™”

- ì „ì²´ ê²°ê³¼ ì§‘í•©ì¤‘, ì¼ë¶€ë§Œ ì½ë‹¤ê°€ ë©ˆì¶”ëŠ” ê²ƒì„ ì „ì œ, ê°€ìž¥ ë¹ ë¥¸ ì‘ë‹µ ì†ë„ë¥¼ ë‚¼ ìˆ˜ ìžˆëŠ” ì‹¤í–‰ê³„íšì„ ì„ íƒ
- ë§Œì•½, ì´ ëª¨ë“œì—ì„œ ìƒì„±í•œ ì‹¤í–‰ê³„íšìœ¼ë¡œ ë°ì´í„°ë¥¼ ëê¹Œì§€ ì½ëŠ”ë‹¤ë©´, ì „ì²´ ì²˜ë¦¬ ì†ë„ ìµœì í™” ì‹¤í–‰ê³„íšë³´ë‹¤ ë” ë§Žì€ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ê³  ìˆ˜í–‰ì†ë„ë„ ëŠë ¤ì§

## **ðŸ“ŒÂ ì˜µí‹°ë§ˆì´ì € í–‰ë™ì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ìš”ì†Œ**

1. SQLê³¼ ì—°ì‚°ìž í˜•íƒœ
2. ì˜µí‹°ë§ˆì´ì§• íŒ©í„°
    - ì¿¼ë¦¬ êµ¬ì„±ì€ ê°™ì•„ë„, Index,IOT,í´ëŸ¬ìŠ¤í„°ë§,íŒŒí‹°ì…”ë‹ ë“±ì˜ êµ¬ì„±ì— ë”°ë¼ ë‹¬ë¼ì§
3. DBMS ì œì•½ ì„¤ì •
    - ê°œì²´ ë¬´ê²°ì„±, ì°¸ì¡° ë¬´ê²°ì„±, ë„ë©”ì¸ ë¬´ê²°ì„±ì„ ìœ„í•´ DBMSì—ì„œ ì œê³µí•˜ëŠ” PK,FK,Check,Not Null ê°™ì€ ì œì•½ ì„¤ì • ê¸°ëŠ¥ì„ ì´ìš©
        - *ì˜ˆì‹œ ) ì¸ë±ìŠ¤ ì¹¼ëŸ¼ì— Not Null ì œì•½ì´ ì„¤ì •ë˜ì–´ìžˆìœ¼ë©´ ì˜µí‹°ë§ˆì´ì €ëŠ” ì „ì²´ê°œìˆ˜ë¥¼ êµ¬í•˜ëŠ” Count ì¿¼ë¦¬ì— ì´ ì¸ë±ìŠ¤ë¥¼ í™œìš©í•  ìˆ˜ ìžˆìŒ*
            - ë‚´ ìƒê°.. *(Nullì¸ ë°ì´í„°ê°€ ì—†ìœ¼ë‹ˆ Countë¥¼ ì„¸ê¸°ì— ì í•©í•˜ë‹¤ê³  íŒë‹¨í•˜ë‚˜..?*
4. ì˜µí‹°ë§ˆì´ì € ížŒíŠ¸ : ì‚¬ìš©ìžê°€ ì§€ì •í•œ ì˜µí‹°ë§ˆì´ì € ížŒíŠ¸
5. í†µê³„ ì •ë³´
- ì„¸ë¶€ í†µê³„ì •
    
    ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-07-16 á„‹á…©á„Œá…¥á†« 2.21.09.png](%E1%84%8B%E1%85%A9%E1%86%B8%E1%84%90%E1%85%B5%E1%84%86%E1%85%A1%E1%84%8B%E1%85%B5%E1%84%8C%E1%85%A5%E1%84%85%E1%85%A1%E1%86%AB%20dc92b4624af7486ea003b3f2d1c4ec31/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-07-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_2.21.09.png)
    
    1. ì˜µí‹°ë§ˆì´ì € ê´€ë ¨ íŒŒë¼ë¯¸í„° 
        - DBMS ë²„ì „ì„ ì—…ê·¸ë ˆì´ë“œí•˜ë©´ ë‹¤ë¥´ê²Œ ìž‘ë™ ! ( ì˜µí‹°ë§ˆì´ì € ê´€ë ¨ íŒŒë¼ë¯¸í„°ê°€ ì¶”ê°€ ë˜ëŠ” ë³€ê²½ë˜ê¸°ë•Œë¬¸)
    2. DBMS ë²„ì „ê³¼ ì¢…ë¥˜ 
        - ë²„ì „ì— ë”°ë¼ ë‚´ë¶€ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì´ ë‹¤ë¥¼ ìˆ˜ ìžˆìŒ

### **ðŸ“ŒÂ Â ì˜µí‹°ë§ˆì´ì €ì˜ í•œê³„**

> ì˜µí‹°ë§ˆì´ì €ê°€ ë¹„íš¨ìœ¨ì ìœ¼ë¡œ ë™ìž‘í•˜ê³  ìžˆë‹¤ë©´, ì˜¤ë¼í´ì˜ ížŒíŠ¸ì™€ ê°™ì€ ë¶€ê°€ì ì¸ ìž¥ì¹˜ë¡œ ì˜¬ë°”ë¥´ê²Œ ìž‘ë™í•˜ë„ë¡ ìœ ë„í•´ì•¼í•¨
> 

**âœ”ì˜µí‹°ë§ˆì´ì €ê°€ ì™„ë²½í•˜ì§€ ëª»í•˜ê²Œ ë§Œë“œëŠ” ìš”ì¸**

1. ì˜µí‹°ë§ˆì´ì§• íŒ©í„°ì˜ ë¶€ì¡±
    - íš¨ê°€ì ìœ¼ë¡œ êµ¬ì„±ëœ ì¸ë±ìŠ¤, IOT, í´ëŸ¬ìŠ¤í„°ë§, íŒŒí‹°ì…”ë‹ ë“±ì´ í•„ìš”
2. í†µê³„ì •ë³´ì˜ ë¶€ì •í™•ì„±
    - 100% ì •í™•í•œ í†µê³„ì •ë³´ë¥¼ ìœ ì§€í•˜ê¸° ì–´ë µê¸°ë•Œë¬¸ì—,
    - íŠ¹ížˆ ì¹¼ëŸ¼ ë¶„í¬ê°€ ê³ ë¥´ì§€ ì•Šì„ë•Œ ì¹¼ëŸ¼ ížˆìŠ¤í† ê·¸ëž¨ì´ ë°˜ë“œì‹œ í•„ìš”í•œë°, ì´ë¥¼ ìˆ˜ì§‘í•˜ê³  ìœ ì§€í•˜ëŠ” ë¹„ìš©ì´ í¼.
    - ì¹¼ëŸ¼ì„ ê²°í•©í–ˆì„ë•Œ ëª¨ë“  ê²°í•© ë¶„í¬ë¥¼ ë¯¸ë¦¬ êµ¬í•´ë‘ê¸°ë„ ì–´ë ¤ì›€.
    - ë”°ë¼, ìƒê´€ê´€ê³„ì— ìžˆëŠ” ë‘ ì¹¼ëŸ¼ì´ ì¡°ê±´ì ˆì— ì‚¬ìš©ë ë•Œ ì˜µí‹°ë§ˆì´ì €ê°€ ìž˜ëª¨ëœ ì‹¤í–‰ê³„íšì„ ìˆ˜ë¦½í•˜ê²Œ ë§Œë“œëŠ” ì£¼ ìš”ì¸ìž„
3. ë°”ì¸ë“œ ë³€ìˆ˜ ì‚¬ìš©ì‹œ ê· ë“± ë¶„í¬ ê°€ì •
    - ì¡°ê±´ì ˆì— ë°”ì¸ë“œ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´, ì˜µí‹°ë§ˆì´ì €ê°€ ê· ë“±ë¶„í¬ë¥¼ ê°€ì •í•˜ê³  ë¹„ìš©ì„ ê³„ì‚°í•¨ ( ì •í™•í•œ ì¹¼ëŸ¼ ížˆìŠ¤í† ê·¸ëž¨ì„ ê°€ì§€ê³  ìžˆë”ë¼ë„ !! )
4. ë¹„í˜„ì‹¤ì ì¸ ê°€ì •
    - ì¿¼ë¦¬ ìˆ˜í–‰ ë¹„ìš©ì„ í‰ê°€ì‹œ ì—¬ëŸ¬ ê°€ì •ì„ ì‚¬ìš©í•¨, ê·¸ ì¼ë¶€ëŠ” ìƒë‹¹ížˆ ë¹„í˜„ì‹¤ì ì´ë¼ ì¢…ì¢… ì´í•´í•  ìˆ˜ ì—†ëŠ” ì‹¤í–‰ê³„íšì„ ìˆ˜ë¦½
    - ì˜ˆì‹œ) ì˜ˆì „ Oracle ë²„ì „ì—ì„  single block I/Oì™€ Multiblock I/Oì˜ ë¹„ìš©ì„ ê°™ê²Œ í‰ê°€í•˜ê³  ë°ì´í„° ë¸”ë¡ì˜ ìºì‹± íš¨ê³¼ë„ ê³ ë ¤í•˜ì§€ ì•Šì•˜ì—ˆìŒ.
    - í•´ë‹¹ ë¶€ë¶„ì€ DBMS ë²„ì „ì´ ì˜¬ë¼ê°€ë©´ì„œ ê³„ì† ë³´ì™„ë˜ê³  ìžˆì§€ë§Œ, ì™„ë²½ížˆ í•´ê²°ë˜ì§„ ì•Šìœ¼ë¯€ë¡œ
5. ê·œì¹™ì— ì˜ì¡´í•˜ëŠ” CBO
    - ì˜ˆì‹œ) ìµœì í™” ëª©í‘œë¥¼ ìµœì´ˆ ì‘ë‹µì†ë„ì— ë§žì¶”ë©´ order by ì†ŒíŠ¸ë¥¼ ëŒ€ì²´í•  ì¸ë±ìŠ¤ê°€ ìžˆì„ë•Œ ë¬´ì¡°ê±´ ê·¸ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•¨
6. í•˜ë“œì›¨ì–´ ì„±ëŠ¥
    - ì˜µí‹°ë§ˆì´ì € ê°œë°œíŒ€ì´ ì‚¬ìš©í•œ í•˜ë“œì›¨ì–´ ì‚¬ì–‘ì— ë§žì¶°ì ¸ìžˆìŒ.
    - ë”°ë¼, ì‹¤ì œ ìš´ì˜ ì‹œìŠ¤í…œì˜ í•˜ë“œì›¨ì–´ ì‚¬ì–‘ì´ ê·¸ê²ƒê³¼ ë‹¤ë¥¼ë•Œ ìž˜ëª»ëœ ì‹¤í–‰ê³„íšì„ ìˆ˜ë¦½í•  ê°€ëŠ¥ì„±ì´ ë†’ì•„ì§
    - ì–´í”Œë¦¬ì¼€ì´ì…˜ íŠ¹ì„±(I/O íŒ¨í„´, ë¶€í•˜ì •ë„) ë“±ì— ì˜í•´ì„œë„ í•˜ë“œì›¨ì–´ ì„±ëŠ¥ì€ ë‹¬ë¼ì§

### **âœ”**Â ë¨¸ì‹ ëŸ¬ë‹ì—ì„œì˜ ì˜µí‹°ë§ˆì´ì €

- ë¨¸ì‹ ëŸ¬ë‹ì˜ ì„±ëŠ¥ ê°œì„ ë²•=ì˜µí‹°ë§ˆì´ì§• (ìµœì í™” - optimization )
- ì‚¬ì‹¤ DBì™€ ë¨¸ì‹ ëŸ¬ë‹, ë”¥ëŸ¬ë‹ì—ì„œ ë§í•˜ëŠ” ì˜µí‹°ë§ˆì´ì €ì˜ ê¶ê·¹ì ì¸ ëª©ì ì€ ë™ì¼í•  ê²ƒì´ë‹¤.

> **DBì—ì„œ ìµœì†Œì˜ ì½”ìŠ¤íŠ¸ë¡œ ê²°ê³¼ë¥¼ ì°¾ëŠ” ê°œë…ê³¼ ì‹ ê²½ë§ì˜ ëª¨ë¸ì´ ì‹¤ì œ ê²°ê³¼ì™€ ì˜ˆì¸¡ ê²°ê³¼ì˜ ì°¨ì´ë¥¼ ìµœì†Œí™” ì‹œí‚¤ëŠ” ê²ƒì€ ì–´ì°Œë³´ë©´ ë™ì¼**
> 

ðŸ”—Â [https://zangzangs.tistory.com/103](https://zangzangs.tistory.com/103)

ðŸ”—[https://code-lab1.tistory.com/137](https://code-lab1.tistory.com/137)

ðŸ”—[https://needjarvis.tistory.com/685](https://needjarvis.tistory.com/685)