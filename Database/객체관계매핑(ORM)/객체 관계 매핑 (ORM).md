# ê°ì²´ ê´€ê³„ ë§¤í•‘ (ORM)

íƒœê·¸: ë°ì´í„°ë² ì´ìŠ¤

<aside>
ğŸ’¡ ì˜ì†ì„±(Persistence)

- ë°ì´í„°ë¥¼ ìƒì„±í•œ í”„ë¡œê·¸ë¨ì„ ì¢…ë£Œë˜ë”ë¼ë„ ì‚¬ë¼ì§€ì§€ì•ŠëŠ” ë°ì´í„°ì˜ íŠ¹ì„±ì„ ë§í•¨
- ì˜ì†ì„±ì„ ê°–ì§€ ì•ŠëŠ” ë°ì´í„°ëŠ” ë‹¨ì§€ ë©”ëª¨ë¦¬ì—ì„œë§Œ ì¡´ì¬í•˜ê¸°ë•Œë¬¸ì— í”„ë¡œê·¸ë¨ì„ ì¢…ë£Œí•˜ë©´ ëª¨ë‘ ìƒì–´ë²„ë¦¬ê²Œ ë¨
</aside>

- **Object Persistence (ì˜êµ¬ì ì¸ ê°ì²´)**
    - ë©”ëª¨ë¦¬ ìƒì˜ ë°ì´í„°ë¥¼ íŒŒì¼ ì‹œìŠ¤í…œ, ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ í˜¹ì€ ê°ì²´ ë°ì´í„°ë² ì´ìŠ¤ ë“±ì„ í™œìš©í•˜ì—¬ ì˜êµ¬ì ìœ¼ë¡œ ì €ì¥í•˜ì—¬ ì˜ì†ì„±ì„ ë¶€ì—¬
        
        ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-07-18 á„‹á…©á„’á…® 10.21.44.png](%E1%84%80%E1%85%A2%E1%86%A8%E1%84%8E%E1%85%A6%20%E1%84%80%E1%85%AA%E1%86%AB%E1%84%80%E1%85%A8%20%E1%84%86%E1%85%A2%E1%84%91%E1%85%B5%E1%86%BC%20(ORM)%20a68dffea33b642039aa919498e84661d/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-07-18_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_10.21.44.png)
        
    - ë°ì´í„°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ëŠ” 3ê°€ì§€ ë°©ë²•
        1. JDBC ( JAVAì—ì„œ ì‚¬ìš© )
        2. Spring JDBBC ( ex: JdbcTemplate)
        3. Persistence Framework (ex: Hibernate , Mybatis ë“±)
- **Persistence Layer**
    - í”„ë¡œê·¸ë¨ì˜ ì•„í‚¤í…ì²˜ì—ì„œ ë°ì´í„°ì— ì˜ì†ì„±ì„ ë¶€ì—¬í•´ì£¼ëŠ” ê³„ì¸µì„ ë§í•¨
    - JDBCë¥¼ ì´ìš©í•˜ì—¬ ì§ì ‘ êµ¬í˜„í•  ìˆ˜ ìˆì§€ë§Œ Persistence frameworkì„ ì´ìš©í•œ ê°œë°œì´ ë§ì´ ì´ë£¨ì–´ì§
- **Persistence Framework**
    - JDBC í”„ë¡œê·¸ë˜ë°ì˜ ë³µì¡í•¨ì´ë‚˜ ë²ˆê±°ë¡œì›€ì—†ì´ ê°„ë‹¨í•œ ì‘ì—…ë§Œìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì™€ ì—°ë™ë˜ëŠ” ì‹œìŠ¤í…œì„ ë¹ ë¥´ê²Œ ê°œë°œí•  ìˆ˜ ìˆìœ¼ë©° ì•ˆì •ì ì¸ êµ¬ë™ì„ ë³´ì¥
    - Persistence FrameworkëŠ” SQL Mapperì™€ ORMìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆìŒ
        - `ex)` JPA, Hibernate, Mybatis

# ORM (object Relational Mapping)

**ğŸ“Œ**Â Object Relational Mapping, ê°ì²´-ê´€ê³„ ë§¤í•‘

- ê°ì²´ì™€ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì˜ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ë§¤í•‘(ì—°ê²°)í•´ì£¼ëŠ” ê²ƒì„ ë§í•¨
    - ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì€ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê³  ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ëŠ” í…Œì´ë¸”ì„ì‚¬ìš©í•¨
        - ë”°ë¼, ê°ì²´ ëª¨ë¸ê³¼ ê´€ê³„í˜• ëª¨ë¸ê°„ì˜ ë¶ˆì¼ì¹˜ê°€ ì¡´ì¬
    - ORMì„ í†µí•´ ê°ì²´ ê°„ì˜ ê´€ê³„ë¥¼ ë°”íƒ•ìœ¼ë¡œ SQLì„ ìë™ìœ¼ë¡œ ìƒì„±í•˜ì—¬ ë¶ˆì¼ì¹˜ë¥¼ í•´ê²°í•¨
- ë°ì´í„° ë² ì´ìŠ¤ ë°ì´í„° â† ë§¤í•‘ â†’ Obejct í•„ë“œ
    - ê°ì²´ë¥¼ í†µí•´ ê°„ì ‘ì ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ ë°ì´í„°ë¥¼ ë‹¤ë£¸
- Persistent APIë¼ê³ ë„ í•  ìˆ˜ ìˆìŒ
    - `ex)` JPA, Hibernate ë“±

## **ğŸ“ŒÂ ORMì˜ ì¥ë‹¨ì **

### **âœ”Â ì¥ì **

- ê°ì²´ ì§€í–¥ì ì€ ì½”ë“œë¥¼ ì¸í•´ ë¹„ìŠ¤ë‹ˆìŠ¤ ë¡œì§ì— ë” ì§‘ì¤‘í•  ìˆ˜ ìˆê²Œ í•¨
    - ORMì„ ì´ìš©í•˜ë©´ SQL ì¿¼ë¦¬ê°€ ì•„ë‹Œ ë©”ì„œë“œë¡œ ë°ì´í„°ë¥¼ ì¡°ì‘í•  ìˆ˜ ìˆì–´ ê°œë°œìê°€ ê°ì²´ ëª¨ë¸ë¡œ í”„ë¡œê·¸ë˜ë°í•˜ëŠ”ë° ì§‘ì¤‘í•  ìˆ˜ ìˆë„ë¡ í•¨
    - ì„ ì–¸ë¬¸, í• ë‹¹, ì¢…ë£Œ ê°™ì€ ë¶€ìˆ˜ì ì¸ ì½”ë“œê°€ ì—†ê±°ë‚˜ ì¤„ì–´ë“¦
    - ê°ì¢… ê°ì²´ì— ëŒ€í•œ ì½”ë“œë¥¼ ë³„ë„ë¡œ ì‘ì„±í•˜ê¸°ë•Œë¬¸ì— ì½”ë“œì˜ ê°€ë…ì„±ì„ ì˜¬ë ¤ì¤Œ
    - SQLì˜ ì ˆì°¨ì ì´ê³  ìˆœì°¨ì ì¸ ì ‘ê·¼ì´ ì•„ë‹Œ, ê°ì²´ì§€í–¥ì ì¸ ì ‘ê·¼ìœ¼ë¡œ ì¸í•´ ìƒì‚°ì„±ì´ ì¦ê°€
- ì¬ì‚¬ìš© ë° ìœ ì§€ë³´ìˆ˜ì˜ í¸ë¦¬ì„±ì´ ì¦ê°€
    - ORMì€ ë…ë¦½ì ìœ¼ë¡œ ì‘ì„±ë˜ì–´ìˆê³ , í•´ë‹¹ ê°ì²´ë“¤ì„ ì¬í™œìš©í•  ìˆ˜ ìˆë‹¤
    - ë•Œë¬¸ì— ëª¨ë¸ì—ì„œ ê°€ê³µëœ ë°ì´í„°ë¥¼ ì»¨íŠ¸ë¡¤ëŸ¬ì— ì˜í•´ ë·°ì™€ í•©ì³ì§€ëŠ” í˜•íƒœë¡œ ë””ìì¸íŒ¨í„´ì„ ê²¬ê³ í•˜ê²Œ ë‹¤ì§€ëŠ”ë°ì— ìœ ë¦¬
    - ë§¤í•‘ ì •ë³´ê°€ ëª…í™•, ERDë¥¼ ë³´ëŠ” ê²ƒì— ëŒ€í•œ ì˜ì¡´ë„ ë‚®ì¶¤
- DBMSì— ëŒ€í•œ ì¢…ì†ì„±ì´ ì¤„ì–´ë“¦
    - ê°ì²´ ê°„ì˜ ê´€ê³„ë¥¼ ë°”íƒ•ìœ¼ë¡œ SQLì„ ìë™ìœ¼ë¡œ ìƒì„±í•˜ê¸°ë•Œë¬¸ì— RDBMSì˜ ë°ì´í„° êµ¬ì¡°ì™€ JAVAì˜ ê°ì²´ ì§€í–¥ ëª¨ë¸ ì‚¬ì´ì˜ ê°„ê²©ì„ ì¢í ìˆ˜ ìˆìŒ
    - ëŒ€ë¶€ë¶„ ORM ì†”ë£¨ì…˜ì€ DBì— ì¢…ì†ì ì´ì§€ ì•ŠìŒ
        - ì¢…ì†ì ì´ì§€ ì•Šë‹¤ = êµ¬í˜„ ë°©ë²•ë¿ë§Œ ì•„ë‹ˆë¼ ë§ì€ ì†”ë£¨ì…˜ì—ì„œ ìë£Œí˜• íƒ€ì…ê¹Œì§€ ìœ íš¨í•¨
        - í”„ë¡œê·¸ë˜ë¨¸ëŠ” Objectì— ì§‘ì¤‘í•¨ìœ¼ë¡œ ê·¹ë‹¨ì ìœ¼ë¡œ DBMSë¥¼ êµì²´í•˜ëŠ” ê±°ëŒ€í•œ ì‘ì—…ì—ë„ ë¹„êµì  ì ì€ ë¦¬ìŠ¤í¬ì™€ ì‹œê°„ì´ ì†Œìš”ë¨
        - ë˜í•œ, ìë°”ë¥¼ ê°€ê³µí• ê²½ìš° equals , hashCodeì˜ ì˜¤ë²„ë¼ì´ë“œ ê°™ì€ ìë°”ì˜ ê¸°ëŠ¥ì„ ì´ìš©í•  ìˆ˜ ìˆê³ , ê°„ê²°í•˜ê³  ë¹ ë¥¸ ê°€ê³µì´ ê°€ëŠ¥í•¨

### **âœ”Â ë‹¨ì **

- ì™„ë²½í•œ ORMìœ¼ë¡œë§Œ ì„œë¹„ìŠ¤ë¥¼ êµ¬í˜„í•˜ê¸°ê°€ ì–´ë µë‹¤
    - ì‚¬ìš©í•˜ê¸° í¸í•˜ì§€ë§Œ,, ì„¤ê³„ëŠ” ì‹ ì¤‘íˆ!
    - í”„ë¡œì íŠ¸ ë³µì¡ì„±ì´ ì»¤ì§ˆê²½ìš° ë‚œì´ë„ ì˜¬ë¼ê°
    - ì˜ëª» êµ¬í˜„ë  ê²½ìš° ì†ë„ ì €í•˜ ë° ì‹¬ê°í•  ê²½ìš° ì¼ê´€ì„±ì´ ë¬´ë„ˆì§ˆ ìˆ˜ ìˆìŒ
    - ìì£¼ ì‚¬ìš©ë˜ëŠ” ëŒ€í˜•ì¿¼ë¦¬ëŠ” ì†ë„ë¥¼ ìœ„í•´ SPë¥¼ ì“°ëŠ” ë“± ë³„ë„ì˜ íŠœë‹ì´ í•„ìš”í•¨
    - DBMSì˜ ê³ ìœ  ê¸°ëŠ¥ì„ ì´ìš©í•˜ê¸° ì–´ë ¤ì›€ ( ë‹¨ì ì´ë¼ê³  ë³¼ìˆœ ì—†ìŒ. íŠ¹ì • DBMSì˜ ê³ ìœ  ê¸°ëŠ¥ì„ ì´ìš©í•˜ë©´ ì´ì‹ì„±ì´ ì €í•˜ë¨)
- í”„ë¡œì‹œì €ê°€ ë§ì€ ì‹œìŠ¤í…œì—ì„œ ORMì—ì„œ ê°ì²´ì§€í–¥ì ì¸ ì¥ì ì„ í™œìš©í•˜ê¸° ì–´ë ¤ì›€
    - ì´ë¯¸ í”„ë¡œì‹œì €ê°€ ë§ì€ ì‹œìŠ¤í…œì—ì„  ë‹¤ì‹œ ê°ì²´ë¡œ ë°”ê¿”ì•¼í•˜ë©°, ê·¸ ê³¼ì •ì—ì„œ ìƒì‚°ì„± ì €í•˜, ë¦¬ìŠ¤í¬ê°€ ë§ì´ ë°œìƒí•  ìˆ˜ ìˆìŒ

## **ğŸ“ŒÂ The object-Relational Impedance Mismatch**

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-07-18 á„‹á…©á„’á…® 10.33.39.png](%E1%84%80%E1%85%A2%E1%86%A8%E1%84%8E%E1%85%A6%20%E1%84%80%E1%85%AA%E1%86%AB%E1%84%80%E1%85%A8%20%E1%84%86%E1%85%A2%E1%84%91%E1%85%B5%E1%86%BC%20(ORM)%20a68dffea33b642039aa919498e84661d/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-07-18_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_10.33.39.png)

**âœ”Â  ì„¸ë¶„ì„± Granularity**

**âœ”Â ìƒì† Inheritance**

**âœ”Â ì¼ì¹˜ Identity**

**âœ”Â ì—°ê´€ì„± Associations**

**âœ”Â íƒìƒ‰/ìˆœíšŒ Navigation**

### **âœ”Â Association ì—°ê´€ì„±**

- Javaì—ì„œ ê°ì²´ ì°¸ì¡° (Object References) : ë°©í–¥ì„±ì´ ìˆë‹¤ ( Directional)
    - Javaì—ì„œ ì–‘ë°©í–¥ ê´€ê³„ê°€ í•„ìš”í•œ ê²½ìš°, ì—°ê´€ì„ ë‘ë²ˆ ì •ì˜í•´ì•¼í•¨
        - ì¦‰, ì„œë¡œ Referenceë¥¼ ê°€ì§€ê³  ìˆìŒ
            
            ```java
            public class Employee { 
                  private int id; 
                  private String first_name; 
                  â€¦
                  private Department department; // Employee -> Department
                  â€¦
              }
            https://gmlwjd9405.github.io/2019/02/01/orm.html
            ```
            
- RDBMSì™€ ì™¸ë˜í‚¤ ( Foreign Key)
    - FKì™€ í…Œì´ë¸” Joinì€ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ìì—°ìŠ¤ëŸ½ê²Œ ë§Œë“¦
        
        ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-07-18 á„‹á…©á„’á…® 10.39.11.png](%E1%84%80%E1%85%A2%E1%86%A8%E1%84%8E%E1%85%A6%20%E1%84%80%E1%85%AA%E1%86%AB%E1%84%80%E1%85%A8%20%E1%84%86%E1%85%A2%E1%84%91%E1%85%B5%E1%86%BC%20(ORM)%20a68dffea33b642039aa919498e84661d/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-07-18_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_10.39.11.png)
        
    - ë°©í–¥ì„±ì´ ì—†ìŒ (Direction-Less)
        
        ```sql
        INSERT INTO 
          EMPLOYEE(id, first_name, â€¦ ,department_id) // FK
          VALUES â€¦
        ```
        

### âœï¸Â (1) One-to-One Relationship

- ì˜ˆì‹œ, ê° í•™ìƒì€ ê³ ìœ í•œ ì£¼ì†Œë¥¼ ê°–ê³  ìˆìŒ
    1. RDBMS (ë°©í–¥ì„±X)
    
    ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-07-18 á„‹á…©á„’á…® 10.40.43.png](%E1%84%80%E1%85%A2%E1%86%A8%E1%84%8E%E1%85%A6%20%E1%84%80%E1%85%AA%E1%86%AB%E1%84%80%E1%85%A8%20%E1%84%86%E1%85%A2%E1%84%91%E1%85%B5%E1%86%BC%20(ORM)%20a68dffea33b642039aa919498e84661d/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-07-18_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_10.40.43.png)
    
    - ê° Studentì˜ recodeëŠ” ì„œë¡œ ë‹¤ë¥¸ Address recordë¥¼ ê°€ë¦¬í‚¤ê³  ì´ê²ƒì€ ì¼ëŒ€ì¼ ë§¤í•‘ì„ ë³´ì—¬ì¤Œ
    1. Java Object (ë°©í–¥ì„± O)

```java
public class Student {
 private long studentId;
 private String studentName;
 private Address studentAddress; // Student -> Address
 â€¦
}
public class Address {
 private long addressId;
 private String street;
 private String city;
 private String state;
 private String zipcode;
 â€¦
}
```

### âœï¸Â (2) One-to-Many Relationship

- ì˜ˆì‹œ, ê° í•™ìƒì€ ì—¬ëŸ¬ê°œì˜ í•¸ë“œí°ì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤ê³  í•˜ì
    1. RDBMS (ë°©í–¥ì„±X)
        - ê° Studentì˜ recordëŠ” ì—¬ëŸ¬ê°œì˜ Phone recordë¥¼ ê°€ë¦¬í‚¬ ìˆ˜ ìˆìŒ ( ì¼ëŒ€ë‹¤ ë§¤í•‘)
        - í•´ë‹¹ ê´€ê³„ë¥¼ ë‹¤ë¥¸ í…Œì´ë¸” ( Relational Model)ë¡œ ë§Œë“¤ ìˆ˜ ìˆìŒ
            - One-to-Many êµ¬ì„±ë°©ë²•
                1. JOIN TABLE
                2. JOIN COLUMN
    2. Jaca Object (ë°©í–¥ì„±O)
        
        ```java
        public class Student {
         private long studentId;
         private String studentName;
         private Set<Phone> studentPhoneNumbers; // Student -> Some Phones
         â€¦
        }
        public class Phone {
         private long phoneId;
         private String phoneType;
         private String phoneNumber;
         â€¦
        }
        ```
        

ğŸ”—Â [https://gmlwjd9405.github.io/2019/02/01/orm.html](https://gmlwjd9405.github.io/2019/02/01/orm.html)

###